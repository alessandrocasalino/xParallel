(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     87658,       2184]
NotebookOptionsPosition[     76548,       1980]
NotebookOutlinePosition[     76941,       1996]
CellTagsIndexPosition[     76898,       1993]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["xParallel", "Title",
 CellChangeTimes->{{3.809195207879222*^9, 
  3.809195210566732*^9}},ExpressionUUID->"ba32362b-b875-4cdd-86d5-\
7f433d9ef3c0"],

Cell[CellGroupData[{

Cell[TextData[StyleBox["Parallelization for xAct",
 FontSize->24,
 FontColor->RGBColor[0, 0, 1]]], "Subsection",
 CellChangeTimes->{{3.8091961100931673`*^9, 
  3.8091961328726463`*^9}},ExpressionUUID->"96d4ac52-d19b-4329-905e-\
6690f99bb11d"],

Cell[TextData[StyleBox["Alessandro Casalino, alessandro.casalino@unitn.it", \
"Subtitle",
 FontColor->GrayLevel[0.5]]], "Affiliation",
 CellChangeTimes->{{3.809196026822371*^9, 
  3.809196051151464*^9}},ExpressionUUID->"e14de1ed-41c3-4b6c-acca-\
1ded21f7952d"],

Cell[TextData[StyleBox["(c) 2020, under GPL",
 FontSize->16]], "Text",
 CellChangeTimes->{
  3.8091962260978527`*^9, {3.80919629400674*^9, 
   3.809196296562151*^9}},ExpressionUUID->"b4c575c2-de32-45aa-afc7-\
3542ff8c97be"],

Cell["\<\
This package introduces simple parallelization functions to xAct.
   
The package xParallel is distributed under the GNU GPL License, and runs on \
top of xTensor, a free package for fast manipulation of abstract tensor \
expressions in Mathematica.\
\>", "Text",
 CellChangeTimes->{{3.809196243989654*^9, 3.809196288429755*^9}, {
  3.809196640697575*^9, 
  3.809196641517*^9}},ExpressionUUID->"759596b6-a058-4737-8bec-5695296854a3"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DateList", "[", "]"}]], "Input",
 CellLabel->"In[52]:=",ExpressionUUID->"b8bc0769-312e-4057-9690-8a083b3e7f8a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "2020", ",", "9", ",", "16", ",", "11", ",", "15", ",", 
   "34.009782`8.284178828034879"}], "}"}]], "Output",
 CellChangeTimes->{3.809196350849262*^9, 3.8092355107762117`*^9, 
  3.809236427043251*^9, 3.809236497701572*^9, 3.809236534015876*^9},
 CellLabel->"Out[52]=",ExpressionUUID->"81766754-148e-4de2-8c22-e3f1f0921be3"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"xAct`xParallel`$Version", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<0.0.1\>\"", ",", 
     RowBox[{"{", 
      RowBox[{"2020", ",", "9", ",", "16"}], "}"}]}], "}"}]}], ";"}]], "Input",\

 InitializationCell->True,
 CellChangeTimes->{{3.809196312920764*^9, 3.809196330922373*^9}},
 CellLabel->"In[53]:=",ExpressionUUID->"efa92e14-ecd4-4e52-a256-a95ba2bfb632"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xAct`xParallel`$xTensorVersionExpected", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<1.1.3\>\"", ",", 
     RowBox[{"{", 
      RowBox[{"2018", ",", "2", ",", "28"}], "}"}]}], "}"}]}], ";"}]], "Input",\

 InitializationCell->True,
 CellChangeTimes->{{3.80919633715386*^9, 3.80919633846856*^9}, {
  3.809234255752771*^9, 3.8092342594193077`*^9}, {3.809235629713022*^9, 
  3.8092356328718433`*^9}},
 CellLabel->"In[54]:=",ExpressionUUID->"33b63522-7ff3-4c00-9db6-0cb3409274e7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["1. Initialization",
 FontColor->RGBColor[0, 0, 1]]], "Chapter",
 CellChangeTimes->{{3.8091954032443438`*^9, 3.809195407937531*^9}, {
  3.809195466597281*^9, 3.809195467171261*^9}, {3.809195564642105*^9, 
  3.809195567160725*^9}},ExpressionUUID->"f3377482-b610-45cf-b21c-\
dba570d64186"],

Cell[CellGroupData[{

Cell["1.1 GPL", "Subsection",
 CellChangeTimes->{{3.809196372760805*^9, 
  3.809196392369124*^9}},ExpressionUUID->"f5cc90f8-d048-4b12-902c-\
4373f44bb813"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"xParallel", ",", " ", 
    RowBox[{"parallelization", " ", "for", " ", "xAct"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Copyright", " ", 
    RowBox[{"(", "C", ")"}], " ", "2020", " ", "Alessandro", " ", 
    "Casalino"}], " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
     "This", " ", "program", " ", "is", " ", "free", " ", "software"}], ";", 
     " ", 
     RowBox[{"you", " ", "can", " ", "redistribute", " ", "it", " ", 
      RowBox[{"and", "/", "or"}], "\[IndentingNewLine]", " ", "modify", " ", 
      "it", " ", "under", " ", "the", " ", "terms", " ", "of", " ", "the", 
      " ", "GNU", " ", "General", " ", "Public", " ", "License", " ", "as", 
      "\[IndentingNewLine]", " ", "published", " ", "by", " ", "the", " ", 
      "Free", " ", "Software", " ", "Foundation"}], ";", " ", 
     RowBox[{
     "either", " ", "version", " ", "2", " ", "of", "\[IndentingNewLine]", 
      " ", "the", " ", "License"}]}], ",", 
    RowBox[{"or", " ", 
     RowBox[{"(", 
      RowBox[{"at", " ", "your", " ", "option"}], ")"}], " ", "any", " ", 
     "later", " ", 
     RowBox[{
     "version", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "This"}], 
     " ", "program", " ", "is", " ", "distributed", " ", "in", " ", "the", 
     " ", "hope", " ", "that", " ", "it", " ", "will", " ", "be", " ", 
     "useful"}], ",", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{"but", " ", "WITHOUT", " ", "ANY", " ", "WARRANTY"}], ";", " ", 
     RowBox[{
     "without", " ", "even", " ", "the", " ", "implied", " ", "warranty", " ",
       "of", "\[IndentingNewLine]", " ", "MERCHANTABILITY", " ", "or", " ", 
      "FITNESS", " ", "FOR", " ", "A", " ", "PARTICULAR", " ", 
      RowBox[{"PURPOSE", ".", " ", "See"}], " ", "the", " ", "GNU", 
      "\[IndentingNewLine]", " ", "General", " ", "Public", " ", "License", 
      " ", "for", " ", "more", " ", 
      RowBox[{
      "details", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "You"}], 
      " ", "should", " ", "have", " ", "received", " ", "a", " ", "copy", " ",
       "of", " ", "the", " ", "GNU", " ", "General", " ", "Public", " ", 
      "License", "\[IndentingNewLine]", " ", "along", " ", "with", " ", 
      "this", " ", "program"}], ";", " ", 
     RowBox[{"if", " ", "not"}]}], ",", " ", 
    RowBox[{
    "write", " ", "to", " ", "the", " ", "Free", " ", "Software", 
     "\[IndentingNewLine]", " ", "Foundation"}], ",", " ", 
    RowBox[{"Inc", "."}], ",", " ", 
    RowBox[{
     RowBox[{"59", " ", "Temple", " ", "Place"}], "-", 
     RowBox[{"Suite", " ", "330"}]}], ",", " ", "Boston", ",", " ", 
    RowBox[{
     RowBox[{"MA", " ", "02111"}], "-", "1307"}], ",", "\[IndentingNewLine]", 
    "  ", 
    RowBox[{"USA", "."}]}], " ", "\[IndentingNewLine]", "*)"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809196401713303*^9, 3.809196415795574*^9}, 
   3.809196501623434*^9, {3.8091966211214247`*^9, 3.809196625474848*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"b90b959c-ab48-441b-8efd-0609a92e2a31"]
}, Closed]],

Cell[CellGroupData[{

Cell["1.2 Info package", "Subsection",
 CellChangeTimes->{{3.809196691535894*^9, 
  3.809196696304762*^9}},ExpressionUUID->"4cca6b53-7298-425d-a9a8-\
6ff9533c4ff1"],

Cell[BoxData[
 StyleBox[
  RowBox[{
   RowBox[{"(*", " ", 
    RowBox[{":", "Title", ":", " ", "xParallel"}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Author", ":", " ", 
     RowBox[{"Alessandro", " ", "Casalino"}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Summary", ":", " ", 
     RowBox[{"Parallelization", " ", "for", " ", "xAct"}]}], " ", "*)"}], 
   "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", 
     RowBox[{"Brief", " ", "Discussion"}], ":", "\n", "   ", 
     RowBox[{
      RowBox[{
       RowBox[{"-", " ", "Configuration"}], " ", "of", " ", "kernels"}], "\n",
       "   ", "-", " ", 
      RowBox[{
      "Definitions", " ", "on", " ", "all", " ", "created", " ", "kernels"}], 
      "\n", "   ", "-", " ", 
      RowBox[{
      "Some", " ", "parallelized", " ", "functions", " ", "already", " ", 
       "available"}]}]}], " ", "\n", "*)"}], "\n", "  ", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Context", ":", " ", "xAct`xParallel`"}], " ", "*)"}], "\n", 
   "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", 
     RowBox[{"Package", " ", "Version"}], ":", " ", 
     RowBox[{"0.0", ".1"}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Copyright", ":", " ", 
     RowBox[{"Alessandro", " ", "Casalino", " ", 
      RowBox[{"(", "2020", ")"}]}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "History", ":"}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Keywords", ":"}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Source", ":", " ", 
     RowBox[{"xParallel", ".", "nb"}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Warning", ":", " ", 
     RowBox[{
     "The", " ", "package", " ", "is", " ", "still", " ", "a", " ", "work", 
      " ", "in", " ", 
      RowBox[{"progress", "."}]}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", 
     RowBox[{"Mathematica", " ", "Version"}], ":", " ", 
     RowBox[{"6.0", " ", "and", " ", "later"}]}], " ", "*)"}], "\n", "\n", 
   RowBox[{"(*", " ", 
    RowBox[{":", "Limitations", ":", "\n", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{"-", " ", "Not"}], " ", "all", " ", "functions", " ", "has", 
       " ", "been", " ", "implemented"}], "\n", "\t", "-", " ", 
      RowBox[{
      "Some", " ", "algorithm", " ", "might", " ", "be", " ", "slower", " ", 
       "than", " ", "non"}], "-", 
      RowBox[{
      "parallel", " ", "ones", " ", "in", " ", "some", " ", "cases"}]}]}], 
    "\n", "*)"}]}],
  FontColor->GrayLevel[0]]], "Code",
 CellChangeTimes->{{3.809196697628214*^9, 3.8091967156347227`*^9}, {
  3.809196994232655*^9, 3.8091971824607153`*^9}},
 CellLabel->"In[56]:=",ExpressionUUID->"822d16b9-9547-4d93-a5fb-3bf0a6f9ff74"]
}, Closed]],

Cell[CellGroupData[{

Cell["1.3 Begin Package", "Subsection",
 CellChangeTimes->{3.8092353252461767`*^9, 
  3.809236396099235*^9},ExpressionUUID->"664a9634-7e01-471d-b358-\
e91f7f241b8c"],

Cell["Protect against multiple loading of the package:", "Text",ExpressionUUID->"2f37771e-bc3a-44e3-b06b-5eb8c96b1cab"],

Cell[BoxData[
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"xAct`xParallel`Private`xPertSymbols", "=", 
     RowBox[{"DeleteCases", "[", 
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"Names", "[", "\"\<xAct`xParallel`*\>\"", "]"}], ",", 
         RowBox[{"Names", "[", "\"\<xAct`xParallel`Private`*\>\"", "]"}]}], 
        "]"}], ",", 
       RowBox[{
       "\"\<$Version\>\"", "|", "\"\<xAct`xParallel`$Version\>\"", "|", 
        "\"\<$xTensorVersionExpected\>\"", "|", 
        "\"\<xAct`xParallel`$xTensorVersionExpected\>\""}]}], "]"}]}], "}"}], 
   ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Unprotect", "/@", "xAct`xParallel`Private`xPertSymbols"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Clear", "/@", "xAct`xParallel`Private`xPertSymbols"}], ";"}]}], 
  "\[IndentingNewLine]", "]"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809234024934724*^9, 3.80923407261058*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"c48c233d-e5e3-4ce3-aca8-3becc61c3c28"],

Cell["Decide which is the last package being read:", "Text",ExpressionUUID->"aa0fdf17-8772-48de-9652-3e0352af21ec"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Unevaluated", "[", "xAct`xCore`Private`$LastPackage", "]"}], "===",
      "xAct`xCore`Private`$LastPackage"}], ",", 
    RowBox[{
    "xAct`xCore`Private`$LastPackage", "=", "\"\<xAct`xParallel`\>\""}]}], 
   "]"}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{3.809234087581625*^9},
 CellLabel->"In[58]:=",ExpressionUUID->"93c41596-c3fe-4fb9-82a9-f191f88f9047"],

Cell[CellGroupData[{

Cell[BoxData["xAct`xCore`Private`$LastPackage"], "Input",
 CellLabel->"In[59]:=",ExpressionUUID->"ba75c92d-ce5b-4d37-8b7c-d5aa9ad5f8b7"],

Cell[BoxData["\<\"xAct`xParallel`\"\>"], "Output",
 CellChangeTimes->{3.8092355108995247`*^9, 3.809236427185738*^9, 
  3.8092364978225317`*^9, 3.809236534141634*^9},
 CellLabel->"Out[59]=",ExpressionUUID->"910eee37-96d0-44ab-ba1a-0d89d2a1d196"]
}, Open  ]],

Cell["\<\
Explicit (not hidden) import of other packages. QUESTION: Do we really need \
ExpressionManipulation?\
\>", "Text",ExpressionUUID->"bb7bffb4-a931-42cb-84f9-9931ef10e945"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"BeginPackage", "[", 
  RowBox[{"\"\<xAct`xParallel`\>\"", ",", 
   RowBox[{"{", 
    RowBox[{
    "\"\<xAct`xTensor`\>\"", ",", "\"\<xAct`xPerm`\>\"", ",", 
     "\"\<xAct`xCore`\>\"", ",", "\"\<xAct`xPert`\>\"", ",", 
     "\"\<xAct`xCoba`\>\"", ",", "\"\<xAct`ExpressionManipulation`\>\""}], 
    "}"}]}], "]"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809234095115574*^9, 3.809234113597356*^9}, {
  3.809236453930862*^9, 3.809236458976075*^9}},
 CellLabel->"In[60]:=",ExpressionUUID->"0dc9b765-4468-452b-bc5e-1a36253114cd"],

Cell[BoxData["\<\"xAct`xParallel`\"\>"], "Output",
 CellChangeTimes->{
  3.809235511573098*^9, {3.809236426720055*^9, 3.809236427223271*^9}, {
   3.809236497403317*^9, 3.809236497861599*^9}, {3.8092365337102537`*^9, 
   3.80923653415088*^9}},
 CellLabel->"Out[60]=",ExpressionUUID->"ac6401c2-1f3a-425e-a996-a0e091f051fa"]
}, Open  ]],

Cell[TextData[{
 "Check version of ",
 StyleBox["xTensor",
  FontSlant->"Italic"],
 ". We simply compare dates:"
}], "Text",ExpressionUUID->"c03ac4fc-3d51-4635-bef9-bed1b434d7f1"],

Cell[BoxData[
 RowBox[{"If", "[", 
  RowBox[{
   RowBox[{"Not", "@", 
    RowBox[{"OrderedQ", "@", 
     RowBox[{"Map", "[", 
      RowBox[{"Last", ",", 
       RowBox[{"{", 
        RowBox[{"$xTensorVersionExpected", ",", "xAct`xTensor`$Version"}], 
        "}"}]}], "]"}]}]}], ",", 
   RowBox[{"Throw", "@", 
    RowBox[{"Message", "[", 
     RowBox[{
      RowBox[{"General", "::", "versions"}], ",", "\"\<xTensor\>\"", ",", 
      "xAct`xTensor`$Version", ",", "$xTensorVersionExpected"}], "]"}]}]}], 
  "]"}]], "Input",
 InitializationCell->True,
 CellLabel->"In[61]:=",ExpressionUUID->"898fb5f4-2934-46f9-9054-52fdad287326"],

Cell["Welcome message:", "Text",ExpressionUUID->"d2ac0f7c-ff31-4a2d-abf3-9fbd09351605"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<Package xAct`xParallel`  version \>\"", ",", 
    RowBox[{"$Version", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<, \>\"", ",", 
    RowBox[{"$Version", "[", 
     RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "Print", "[", 
   "\"\<CopyRight (C) 2020, Alessandro Casalino, under the General Public \
License.\>\"", "]"}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809234141452696*^9, 3.809234164960026*^9}},
 CellLabel->"In[62]:=",ExpressionUUID->"2663b90e-b8a3-4933-8b7a-dcbfac6c65d1"],

Cell[CellGroupData[{

Cell[BoxData["\<\"------------------------------------------------------------\
\"\>"], "Print",
 CellChangeTimes->{
  3.809235511617887*^9, {3.809236426733589*^9, 3.8092364272702837`*^9}, {
   3.809236497437304*^9, 3.809236497886977*^9}, {3.809236533741108*^9, 
   3.809236534185627*^9}},
 CellLabel->
  "During evaluation of \
In[62]:=",ExpressionUUID->"4c6fc5cc-2d6c-4095-ac25-a737451e5623"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Package xAct`xParallel`  version \"\>", 
   "\[InvisibleSpace]", "\<\"0.0.1\"\>", "\[InvisibleSpace]", "\<\", \"\>", 
   "\[InvisibleSpace]", 
   RowBox[{"{", 
    RowBox[{"2020", ",", "9", ",", "16"}], "}"}]}],
  SequenceForm[
  "Package xAct`xParallel`  version ", "0.0.1", ", ", {2020, 9, 16}],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.809235511617887*^9, {3.809236426733589*^9, 3.8092364272702837`*^9}, {
   3.809236497437304*^9, 3.809236497886977*^9}, {3.809236533741108*^9, 
   3.809236534187476*^9}},
 CellLabel->
  "During evaluation of \
In[62]:=",ExpressionUUID->"e981e942-5dee-4005-a4a0-0c0826637daa"],

Cell[BoxData["\<\"CopyRight (C) 2020, Alessandro Casalino, under the General \
Public License.\"\>"], "Print",
 CellChangeTimes->{
  3.809235511617887*^9, {3.809236426733589*^9, 3.8092364272702837`*^9}, {
   3.809236497437304*^9, 3.809236497886977*^9}, {3.809236533741108*^9, 
   3.8092365341904488`*^9}},
 CellLabel->
  "During evaluation of \
In[62]:=",ExpressionUUID->"c838568e-6a61-4f83-978a-5c3aa28c5f53"]
}, Open  ]]
}, Open  ]],

Cell["\<\
We specify the context xAct`xPert` to avoid overriding the Disclaimer of the \
other packages. However we need to turn off the message General:shdw \
temporarily:\
\>", "Text",ExpressionUUID->"1bccd8bd-d8f5-4f16-bed3-c0b27a15a25d"],

Cell[BoxData[{
 RowBox[{"Off", "[", 
  RowBox[{"General", "::", "shdw"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xAct`xParallel`Disclaimer", "[", "]"}], ":=", 
  RowBox[{
  "Print", "[", 
   "\"\<These are points 11 and 12 of the General Public \
License:\\n\\nBECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO \
WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT \
WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES \
PROVIDE THE PROGRAM `AS IS\.b4 WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED \
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF \
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO \
THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM \
PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR \
CORRECTION.\\n\\nIN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO \
IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY \
AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR \
DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES \
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT \
LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED \
BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER \
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE \
POSSIBILITY OF SUCH DAMAGES.\>\"", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"On", "[", 
  RowBox[{"General", "::", "shdw"}], "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{3.809234178551654*^9},
 CellLabel->"In[65]:=",ExpressionUUID->"335b35ae-d812-45ab-aadd-d044378035b3"],

Cell["If this is the last package show the GPL short disclaimer:", "Text",ExpressionUUID->"6193d10c-26da-4679-b8dd-6925de01539a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
    "xAct`xCore`Private`$LastPackage", "===", "\"\<xAct`xParallel`\>\""}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Unset", "[", "xAct`xCore`Private`$LastPackage", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
     "Print", "[", 
      "\"\<These packages come with ABSOLUTELY NO WARRANTY; for details type \
Disclaimer[]. This is free software, and you are welcome to redistribute it \
under certain conditions. See the General Public License for details.\>\"", 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}]}]}], "]"}], 
  ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{3.809234192038365*^9},
 CellLabel->"In[68]:=",ExpressionUUID->"9d1dffee-a7dc-4810-9692-42ce985f1560"],

Cell[CellGroupData[{

Cell[BoxData["\<\"------------------------------------------------------------\
\"\>"], "Print",
 CellChangeTimes->{
  3.8092355116610928`*^9, {3.8092364267845592`*^9, 3.809236427316798*^9}, {
   3.809236497484573*^9, 3.8092364979346333`*^9}, {3.809236533783122*^9, 
   3.809236534228503*^9}},
 CellLabel->
  "During evaluation of \
In[68]:=",ExpressionUUID->"bf19b117-93e9-413e-97c0-cef48552b5bc"],

Cell[BoxData["\<\"These packages come with ABSOLUTELY NO WARRANTY; for \
details type Disclaimer[]. This is free software, and you are welcome to \
redistribute it under certain conditions. See the General Public License for \
details.\"\>"], "Print",
 CellChangeTimes->{
  3.8092355116610928`*^9, {3.8092364267845592`*^9, 3.809236427316798*^9}, {
   3.809236497484573*^9, 3.8092364979346333`*^9}, {3.809236533783122*^9, 
   3.809236534230098*^9}},
 CellLabel->
  "During evaluation of \
In[68]:=",ExpressionUUID->"b0df725d-075e-4ef3-a516-e3c0ebc28720"],

Cell[BoxData["\<\"------------------------------------------------------------\
\"\>"], "Print",
 CellChangeTimes->{
  3.8092355116610928`*^9, {3.8092364267845592`*^9, 3.809236427316798*^9}, {
   3.809236497484573*^9, 3.8092364979346333`*^9}, {3.809236533783122*^9, 
   3.809236534233098*^9}},
 CellLabel->
  "During evaluation of \
In[68]:=",ExpressionUUID->"319bf54b-b457-4b8f-b153-8ec31ef4891a"]
}, Open  ]]
}, Open  ]],

Cell["\<\
Note that symbols in the Global` context cannot be accessed while building \
the package:\
\>", "Text",ExpressionUUID->"cd8ab63f-e85b-4be4-ab97-52d407a34ba5"],

Cell[CellGroupData[{

Cell[BoxData["$ContextPath"], "Input",
 CellLabel->"In[69]:=",ExpressionUUID->"051b73d1-4c7b-470e-ae6b-c3e2d9fc9918"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"xAct`xParallel`\"\>", ",", "\<\"xAct`xTensor`\"\>", 
   ",", "\<\"xAct`xPerm`\"\>", ",", "\<\"xAct`xCore`\"\>", 
   ",", "\<\"xAct`xPert`\"\>", ",", "\<\"xAct`xCoba`\"\>", 
   ",", "\<\"xAct`ExpressionManipulation`\"\>", ",", "\<\"System`\"\>"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.809235511672387*^9, 3.80923642732663*^9, 
  3.809236497945949*^9, 3.8092365342381887`*^9},
 CellLabel->"Out[69]=",ExpressionUUID->"7e22a73b-6fee-436d-929e-9e467264d53c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["$Context"], "Input",
 CellLabel->"In[70]:=",ExpressionUUID->"445ca15b-b120-42be-8de8-25476485e027"],

Cell[BoxData["\<\"xAct`xParallel`\"\>"], "Output",
 CellChangeTimes->{3.809235511706773*^9, 3.809236427365691*^9, 
  3.809236497982761*^9, 3.809236534274777*^9},
 CellLabel->"Out[70]=",ExpressionUUID->"11c7ccd9-d5b0-4a90-96d8-304f5c2a3e48"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["1.4 Usage messages", "Subsection",
 CellChangeTimes->{{3.809195574965858*^9, 3.809195585030164*^9}, {
  3.80919637924946*^9, 3.8091963888587914`*^9}, {3.809197198784463*^9, 
  3.809197199124627*^9}, {3.809234209428524*^9, 
  3.809234209652388*^9}},ExpressionUUID->"6fdfe586-3de9-4393-9050-\
548561e8c838"],

Cell["Usage messages for xParallel functions", "Text",
 CellChangeTimes->{{3.809196654337571*^9, 
  3.809196661761734*^9}},ExpressionUUID->"610bf60d-595d-4acb-82f5-\
2fe0e9ed1d6b"],

Cell["Initial definitions", "Text",
 CellChangeTimes->{{3.809246754642172*^9, 
  3.809246757282851*^9}},ExpressionUUID->"ac450c15-d0e7-4c05-9478-\
66ad435f05e1"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$ParallelDefInfoQ", "::", "usage"}], "=", "\[IndentingNewLine]", 
   "\"\<$ParallelDefInfoQ is a boolen value controlling the messages printed \
by xParallel functions. If is set to False, only the first kernel will \
generate a message as usual.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelConfigure", "::", "usage"}], "=", "\[IndentingNewLine]", 
   "\"\<ParallelConfigure[N] will launch N kernels. If N > cores of your \
system or kernels of your Mathematica licence, the number will be the minimum \
between these two. The same if N is not specified. Note that \
$DistributedContexts will be set to None.\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelClean", "::", "usage"}], " ", "=", "\[IndentingNewLine]", 
   "\"\<ParallelClean[] will clear all kernels allocated by xParallel.\>\""}],
   ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.80919571485585*^9, 3.809195877438719*^9}, {
  3.80924681213964*^9, 
  3.809246838802404*^9}},ExpressionUUID->"bfbabe17-36a0-4153-b1cb-\
2fd21a65e540"],

Cell["xTensor", "Text",
 CellChangeTimes->{{3.809246763373547*^9, 
  3.8092467961868143`*^9}},ExpressionUUID->"8d80d2f5-1651-475d-93da-\
e2802601e6ac"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefManifold", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelDefManifold works like DefManifold, but allocating the \
definitions on all kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefMetric", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelDefMetric works like DefMetric, but allocating the \
definitions on all kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefTensor", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelDefTensor works like DefTensor, but allocating the \
definitions on all kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefScalarFunction", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelDefScalarFunction works like DefScalarFunction, but \
allocating the definitions on all kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParallelDefConstantSymbol", "::", "usage"}], " ", "=", "\n", 
    "\"\<ParallelDefDefConstantSymbol works like DefConstantSymbol, but \
allocating the definitions on all kernels.\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelContractMetric", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelContractMetric works like ContractMetric, but performing the \
computation on all available kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelSortCovDs", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelSortCovDs works like SortCovDs, but performing the \
computation on all available kernels.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelSimplification", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelSimplification splits the equation in a number of parts given \
by the allocated kernels. It then performs the Simplification on each of \
these parts. The result will not be the same as making a Simplification on \
the original function, therefore it might be necessary to make a \
ParallelSimplification and then another Simplification on the resulting \
equation. Although this is in general faster than a simple Simplification, in \
some cases it might be the opposite.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelToCanonical", "::", "usage"}], " ", "=", "\n", 
   "\"\<ParallelToCanonical splits the equation in a number of parts given by \
the allocated kernels. It then performs the ToCanonical on each of these \
parts.\>\""}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.8092467994564*^9, 3.809246799467519*^9}, {
  3.8092477564958143`*^9, 
  3.809247795165245*^9}},ExpressionUUID->"d2a7f374-5c5f-4803-8573-\
ef10165a41dc"],

Cell["xPert", "Text",
 CellChangeTimes->{{3.809246820338283*^9, 
  3.809246825368174*^9}},ExpressionUUID->"54d2f971-24dd-4de3-a92e-\
9331642256a1"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefMetricPerturbation", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelDefMetricPerturbation works like DefMetricPerturbation, but \
allocating the definitions on all kernels.\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParallelDefTensorPerturbation", "::", "usage"}], " ", "=", 
    "\[IndentingNewLine]", 
    "\"\<ParallelDefTensorPerturbation works like DefTensorPerturbation, but \
allocating the definitions on all kernels.\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelPerturbation", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelPerturbation works like Perturbation, but performing the \
computation on all available kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelExpandPerturbation", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelExpandPerturbation works like ExpandPerturbation, but \
performing the computation on all available kernels.\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelVarD", "::", "usage"}], " ", "=", "\[IndentingNewLine]", 
   "\"\<ParallelVarD works like VarD, but performing the computation on all \
available kernels.\>\""}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809247799880375*^9, 3.8092478015363283`*^9}, 
   3.809249694215847*^9},ExpressionUUID->"df56db52-b183-4987-b258-\
279086dd050a"],

Cell["xCoba", "Text",
 CellChangeTimes->{{3.809246833400833*^9, 
  3.809246834460458*^9}},ExpressionUUID->"f9ce9010-4037-4f64-b67d-\
da52fffa9e42"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefChart", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelDefChart works like DefChart, but allocating the definitions \
on all kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelMetricInBasis", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelMetricInBasis works like MetricInBasis, but allocating the \
definitions on all kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelMetricCompute", "::", "usage"}], " ", "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelDefMetricCompute works like DefMetricCompute, but allocating \
the definitions on all kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParallelComponentValue", "::", "usage"}], " ", "=", 
    "\[IndentingNewLine]", 
    "\"\<ParallelComponentValue works like ComponentValue, but allocating the \
definitions on all kernels.\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelToBasis", "::", "usage"}], "=", "\[IndentingNewLine]", 
   "\"\<ParallelToBasis works like ToBasis, but performing the computation on \
all available kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelComponentArray", "::", "usage"}], "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelComponentArray works like ComponentArray, but performing the \
computation on all available kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelTraceBasisDummy", "::", "usage"}], "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelTraceBasisDummy works like BasisDummy, but performing the \
computation on all available kernels.\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParallelToValues", "::", "usage"}], "=", "\[IndentingNewLine]", 
    "\"\<ParallelToValues works like ToValues, but performing the computation \
on all available kernels.\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelInCoordinates", "::", "usage"}], "=", 
   "\[IndentingNewLine]", 
   "\"\<ParallelInCoordinates[ch][equation] evaluates the input equation term \
by term with ToBasis[ch], ToValues, TraceBasisDummy and ToValues again, in \
parallel.\>\""}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809246879241103*^9, 3.80924697560822*^9}, {
  3.809249689953017*^9, 3.8092497974650373`*^9}, {3.8092521268909082`*^9, 
  3.809252148550067*^9}, {3.8092617683967867`*^9, 3.80926186496583*^9}, {
  3.809262050684903*^9, 
  3.809262053732476*^9}},ExpressionUUID->"9beab0bd-0a41-4540-a4fd-\
a8d600103d05"]
}, Open  ]],

Cell[CellGroupData[{

Cell["1.5 Begin Private", "Subsection",
 CellChangeTimes->{{3.809235339524036*^9, 
  3.80923534408103*^9}},ExpressionUUID->"e54186b3-6434-43a1-b401-\
270382115695"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}]], "Input",
 InitializationCell->True,
 CellLabel->"In[87]:=",ExpressionUUID->"b70d23db-6299-425a-bc5b-5149261cc0cf"],

Cell[BoxData["\<\"xAct`xParallel`Private`\"\>"], "Output",
 CellChangeTimes->{
  3.809235376473917*^9, 3.809235511718294*^9, {3.8092364268272753`*^9, 
   3.809236427400909*^9}, {3.8092364975288153`*^9, 3.809236498017136*^9}, {
   3.809236533827606*^9, 3.809236534312893*^9}},
 CellLabel->"Out[87]=",ExpressionUUID->"52b420ca-3b97-4fc7-ad43-cc889136eba7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["$Context"], "Input",
 CellChangeTimes->{{3.809235349710726*^9, 3.809235350146083*^9}},
 CellLabel->"In[88]:=",ExpressionUUID->"86a24797-c2ba-4f23-968b-11804490cdea"],

Cell[BoxData["\<\"xAct`xParallel`Private`\"\>"], "Output",
 CellChangeTimes->{{3.8092353544286127`*^9, 3.809235377820187*^9}, 
   3.8092355117549057`*^9, 3.8092364274057207`*^9, 3.809236498023033*^9, 
   3.809236534317739*^9},
 CellLabel->"Out[88]=",ExpressionUUID->"bdd4750d-d969-4657-ba1f-4a7a825c3591"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["$ContextPath"], "Input",
 CellLabel->"In[89]:=",ExpressionUUID->"e83e9498-5333-41da-a1eb-5f6a1f63b611"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"xAct`xParallel`\"\>", ",", "\<\"xAct`xTensor`\"\>", 
   ",", "\<\"xAct`xPerm`\"\>", ",", "\<\"xAct`xCore`\"\>", 
   ",", "\<\"xAct`xPert`\"\>", ",", "\<\"xAct`xCoba`\"\>", 
   ",", "\<\"xAct`ExpressionManipulation`\"\>", ",", "\<\"System`\"\>"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.809235355985982*^9, 3.809235380438385*^9}, 
   3.809235511760796*^9, 3.809236427410222*^9, 3.809236498054021*^9, 
   3.809236534347568*^9},
 CellLabel->"Out[89]=",ExpressionUUID->"54be6dde-ca03-432b-948c-caabee22ca58"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["1.5 Initial definitions", "Subsection",
 CellChangeTimes->{{3.80919517885176*^9, 3.809195229798543*^9}, {
  3.809195464240492*^9, 3.809195472233251*^9}, {3.809196382847137*^9, 
  3.8091963901408854`*^9}, {3.809197203910255*^9, 3.809197204296336*^9}, {
  3.809234210972031*^9, 
  3.809234211120881*^9}},ExpressionUUID->"22956cc7-67bf-4dda-9966-\
c022939e5ce2"],

Cell["Verbose flag for definitions", "Text",
 CellChangeTimes->{{3.809197209376958*^9, 
  3.809197221712522*^9}},ExpressionUUID->"730fbf6a-287b-4c1d-836c-\
6171ffdb4f3f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$ParallelDefInfoQ", " ", "=", "False"}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809167981648253*^9, 3.809168003072646*^9}, {
   3.8091680462663517`*^9, 3.8091680772896833`*^9}, {3.809168137355443*^9, 
   3.80916816446736*^9}, {3.809168207307678*^9, 3.809168253884069*^9}, {
   3.809168371515543*^9, 3.8091685301897*^9}, {3.809168750161467*^9, 
   3.809168776520576*^9}, {3.8091691683116713`*^9, 3.809169266049017*^9}, {
   3.809169311020638*^9, 3.809169316950989*^9}, {3.809169362443347*^9, 
   3.809169365984089*^9}, {3.809169399381915*^9, 3.809169406951137*^9}, {
   3.8091694452741756`*^9, 3.809169458083783*^9}, {3.809169720295671*^9, 
   3.8091697852204103`*^9}, {3.8091698221775913`*^9, 
   3.8091698356274147`*^9}, {3.8091699257375917`*^9, 
   3.8091699608514643`*^9}, {3.809170224438992*^9, 3.809170229986216*^9}, 
   3.809170269476302*^9, {3.80917035152614*^9, 3.8091703875191593`*^9}, {
   3.8091704271043386`*^9, 3.809170479942046*^9}, {3.80917056061314*^9, 
   3.809170599023278*^9}, {3.809170743701585*^9, 3.809170757833555*^9}, {
   3.80917095414487*^9, 3.8091709739120007`*^9}, {3.809171010795052*^9, 
   3.809171041514792*^9}, {3.80917107527555*^9, 3.809171091794462*^9}, {
   3.809171151479487*^9, 3.809171167285047*^9}, {3.809171268434667*^9, 
   3.809171465217326*^9}, {3.809172499087929*^9, 3.8091725798367167`*^9}, {
   3.809172625995985*^9, 3.809172633371256*^9}, {3.809172670123514*^9, 
   3.809172672828474*^9}, {3.8091728168860064`*^9, 3.809172909099019*^9}, 
   3.8091887923983517`*^9, {3.8091893708762627`*^9, 3.809189426635569*^9}, {
   3.809189460364134*^9, 3.8091895030138197`*^9}, {3.809189606898918*^9, 
   3.8091897075821037`*^9}, {3.809190016626478*^9, 3.809190032585813*^9}, {
   3.80919013162226*^9, 3.809190163693172*^9}, {3.8091902008990507`*^9, 
   3.8091902827376213`*^9}, {3.809190347913878*^9, 3.809190373544643*^9}, {
   3.809190439893489*^9, 3.8091904671665792`*^9}, {3.809190508271138*^9, 
   3.809190508714683*^9}, {3.8091905527191772`*^9, 3.8091905689721813`*^9}, {
   3.809190629303486*^9, 3.809190635040351*^9}, {3.809190780535055*^9, 
   3.809190786133067*^9}, {3.8091908201091423`*^9, 3.809190890017331*^9}, {
   3.809191125111088*^9, 3.8091912220448*^9}, {3.809191265419441*^9, 
   3.809191282373447*^9}, {3.809191345270059*^9, 3.809191352778651*^9}, {
   3.809191508628148*^9, 3.809191520765127*^9}, {3.809191735572905*^9, 
   3.8091917430815773`*^9}, {3.809191793854967*^9, 3.809191878127194*^9}, {
   3.8091919993496847`*^9, 3.809192014228817*^9}, 3.809192138443975*^9, {
   3.8091921736990843`*^9, 3.8091921743243723`*^9}, {3.809192208207778*^9, 
   3.809192222961008*^9}, {3.809192715519697*^9, 3.8091927410287037`*^9}, {
   3.8091927811718893`*^9, 3.809192781842319*^9}, {3.809192820481903*^9, 
   3.809192820632465*^9}, {3.80919312312818*^9, 3.809193126201107*^9}, {
   3.809193250297954*^9, 3.809193303875147*^9}, {3.809193340492038*^9, 
   3.809193446276016*^9}, {3.8091936110343323`*^9, 3.809194094174738*^9}, {
   3.809194135890149*^9, 3.809194381368207*^9}, {3.809194419625671*^9, 
   3.8091945790109158`*^9}, {3.809194722801597*^9, 3.809194764382807*^9}, {
   3.809194881231626*^9, 3.809194881370384*^9}, {3.809194923015011*^9, 
   3.8091951056629677`*^9}, {3.8091957193180923`*^9, 3.809195885317316*^9}, {
   3.809195980309546*^9, 3.809195982698642*^9}, {3.809197229045936*^9, 
   3.809197229439053*^9}},
 CellLabel->"In[90]:=",ExpressionUUID->"d3f53303-dc28-4397-9fc2-c25fcba39ad4"],

Cell["Function to configure the kernels", "Text",
 CellChangeTimes->{{3.809197234060165*^9, 
  3.809197252845975*^9}},ExpressionUUID->"efa92f5c-acf5-4e2d-aeb2-\
7ef6ef0bcd62"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ParallelConfigure", "[", 
   RowBox[{"N_", ":", 
    RowBox[{"Min", "[", 
     RowBox[{"$ProcessorCount", ",", "$MaxLicenseSubprocesses"}], "]"}]}], 
   "]"}], ":=", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"LaunchKernels", "[", 
     RowBox[{"Min", "[", 
      RowBox[{"N", ",", "$ProcessorCount", ",", "$MaxLicenseSubprocesses"}], 
      "]"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Print", "[", 
     RowBox[{
     "\"\<** ParallelConfigure: Maximum number of kernels allocable is \>\"", 
      ",", " ", 
      RowBox[{"Min", "[", 
       RowBox[{"$ProcessorCount", ",", "$MaxLicenseSubprocesses"}], "]"}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Print", "[", 
     RowBox[{"\"\<** ParallelConfigure: Configuration with \>\"", ",", " ", 
      RowBox[{"Length", "[", 
       RowBox[{"Kernels", "[", "]"}], "]"}], ",", "\"\< kernels\>\""}], "]"}],
     ";", "\[IndentingNewLine]", 
    RowBox[{"$DistributedContexts", "=", "None"}], ";", "\[IndentingNewLine]", 
    RowBox[{"ParallelNeeds", "[", "\"\<xAct`xPert`\>\"", "]"}], ";"}], 
   ")"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809197257008272*^9, 3.8091972574981327`*^9}},
 CellLabel->"In[91]:=",ExpressionUUID->"e29313b6-d397-481f-96a4-476853731006"],

Cell["Function to shut down the kernels", "Text",
 CellChangeTimes->{{3.8091972632481613`*^9, 
  3.809197273502376*^9}},ExpressionUUID->"dcda6719-7819-49c7-8e29-\
17b7c168b03d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ParallelClean", "[", "]"}], ":=", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"CloseKernels", "[", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{
    "Print", "[", 
     "\"\<** ParallelConfigure: Parallel kernels has been shutted down\>\"", 
     "]"}], ";"}], ")"}]}]], "Input",
 InitializationCell->True,
 CellLabel->"In[92]:=",ExpressionUUID->"7703ef46-ca49-4bb2-b8c1-45baf59616d0"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["2. Parallel definitions",
 FontColor->RGBColor[0, 0, 1]]], "Chapter",
 CellChangeTimes->{{3.809195599129263*^9, 3.809195640957336*^9}, {
  3.8091956970011387`*^9, 3.8091956973134747`*^9}, {3.8091959975058002`*^9, 
  3.809195997760003*^9}},ExpressionUUID->"86f6e8eb-b89b-48c0-813c-\
4f40437dacd3"],

Cell[CellGroupData[{

Cell["2.1 xTensor", "Subsection",
 CellChangeTimes->{{3.809195239972763*^9, 3.809195247426896*^9}, {
  3.8091954756140337`*^9, 3.809195476196504*^9}, {3.8091959991759253`*^9, 
  3.809195999333765*^9}},ExpressionUUID->"479ad674-a1dc-4958-adfa-\
57debef4bd82"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefManifold", "[", 
    RowBox[{"M_", ",", "dim_", ",", "indices_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", "\"\<** DefManifold: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", 
     RowBox[{"DefManifold", "[", 
      RowBox[{"M", ",", "dim", ",", "indices", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefManifold", "]"}]}], "]"}]}], "]"}], ";", 
     
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"DefManifold", "[", 
        RowBox[{"M", ",", "dim", ",", "indices", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "DefManifold", "]"}]}], "]"}]}], "]"}], 
       ",", 
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "True"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefMetric", "[", 
    RowBox[{"signdet_", ",", 
     RowBox[{"metric_", "[", 
      RowBox[{"a_", ",", "b_"}], "]"}], ",", "covd_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", "\"\<** DefMetric: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"DefMetric", "[", 
      RowBox[{"signdet", ",", 
       RowBox[{"metric", "[", 
        RowBox[{"a", ",", "b"}], "]"}], ",", "covd", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefTensor", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"DefMetric", "[", 
        RowBox[{"signdet", ",", 
         RowBox[{"metric", "[", 
          RowBox[{"a", ",", "b"}], "]"}], ",", "covd", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "DefTensor", "]"}]}], "]"}]}], "]"}], ",", 
       
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "True"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefTensor", "[", 
    RowBox[{"tensor_", ",", "dependencies_", ",", 
     RowBox[{"options___", "?", "OptionQ"}]}], "]"}], ":=", 
   RowBox[{"ParallelDefTensor", "[", 
    RowBox[{"tensor", ",", "dependencies", ",", 
     RowBox[{"GenSet", "[", "]"}], ",", "options"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefTensor", "[", 
    RowBox[{"tensor_", ",", "dependencies_", ",", "sym_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", "\"\<** DefTensor: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"DefTensor", "[", 
      RowBox[{"tensor", ",", "dependencies", ",", "sym", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefTensor", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"DefTensor", "[", 
        RowBox[{"tensor", ",", "dependencies", ",", "sym", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "DefTensor", "]"}]}], "]"}]}], "]"}], ",", 
       
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefScalarFunction", "[", 
    RowBox[{"f_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", 
        "\"\<** DefScalarFunction: Parallelization definition\>\"", "]"}]}], 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"DefScalarFunction", "[", 
      RowBox[{"f", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefScalarFunction", "]"}]}], "]"}]}], "]"}],
      ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"DefScalarFunction", "[", 
        RowBox[{"f", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "DefScalarFunction", "]"}]}], "]"}]}], 
        "]"}], ",", 
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParallelDefConstantSymbol", "[", 
   RowBox[{"symbol_", ",", 
    RowBox[{"options", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
      RowBox[{
      "Print", "[", 
       "\"\<** DefScalarFunction: Parallelization definition\>\"", "]"}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"DefConstantSymbol", "[", 
     RowBox[{"symbol", ",", 
      RowBox[{"FilterRules", "[", 
       RowBox[{
        RowBox[{"{", "options", "}"}], ",", 
        RowBox[{"Options", "[", "DefConstantSymbol", "]"}]}], "]"}]}], "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "False"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
    RowBox[{"ParallelEvaluate", "[", 
     RowBox[{
      RowBox[{"DefConstantSymbol", "[", 
       RowBox[{"symbol", ",", 
        RowBox[{"FilterRules", "[", 
         RowBox[{
          RowBox[{"{", "options", "}"}], ",", 
          RowBox[{"Options", "[", "DefConstantSymbol", "]"}]}], "]"}]}], 
       "]"}], ",", 
      RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "False"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], 
   ")"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{
  3.809195912688979*^9, {3.809197333627997*^9, 3.8091973337501297`*^9}, {
   3.809247816185648*^9, 
   3.809247857775543*^9}},ExpressionUUID->"ccad0dc1-fa34-48b3-8574-\
0034c00d6d70"]
}, Open  ]],

Cell[CellGroupData[{

Cell["2.2 xPert", "Subsection",
 CellChangeTimes->{{3.809195253386108*^9, 3.8091952597734623`*^9}, {
  3.809195478650428*^9, 3.809195479310246*^9}, {3.809196002120739*^9, 
  3.8091960023158417`*^9}},ExpressionUUID->"c79faea5-415e-4624-90ac-\
ef3ecbe474ed"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefMetricPerturbation", "[", 
    RowBox[{"metric_", ",", "metpert_", ",", "param_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", 
        "\"\<** DefMetricPerturbation: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"DefMetricPerturbation", "[", 
      RowBox[{"metric", ",", "metpert", ",", "param", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefMetricPerturbation", "]"}]}], "]"}]}], 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"DefMetricPerturbation", "[", 
        RowBox[{"metric", ",", "metpert", ",", "param", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "DefMetricPerturbation", "]"}]}], "]"}]}], 
        "]"}], ",", 
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "True"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParallelDefTensorPerturbation", "[", 
   RowBox[{"pert_", ",", "tensor_", ",", "args_", ",", 
    RowBox[{"options", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
      RowBox[{
      "Print", "[", 
       "\"\<** DefTensorPerturbation: Parallelization definition\>\"", 
       "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"DefTensorPerturbation", "[", 
     RowBox[{"pert", ",", "tensor", ",", "args", ",", 
      RowBox[{"FilterRules", "[", 
       RowBox[{
        RowBox[{"{", "options", "}"}], ",", 
        RowBox[{"Options", "[", "DefTensorPerturbation", "]"}]}], "]"}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "False"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"ParallelEvaluate", "[", 
     RowBox[{
      RowBox[{"DefTensorPerturbation", "[", 
       RowBox[{"pert", ",", "tensor", ",", "args", ",", 
        RowBox[{"FilterRules", "[", 
         RowBox[{
          RowBox[{"{", "options", "}"}], ",", 
          RowBox[{"Options", "[", "DefTensorPerturbation", "]"}]}], "]"}]}], 
       "]"}], ",", 
      RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "True"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], 
   ")"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809195928633771*^9, 3.8091959475630817`*^9}},
 CellLabel->"In[98]:=",ExpressionUUID->"d7c49bf4-bc17-48ab-9d38-04798de6acf6"]
}, Open  ]],

Cell[CellGroupData[{

Cell["2.3 xCoba", "Subsection",
 CellChangeTimes->{{3.8092399360030937`*^9, 
  3.809239938933593*^9}},ExpressionUUID->"bd6c638b-2757-4fee-894e-\
996f0952ae8e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelDefChart", "[", 
    RowBox[{"basis_", ",", "args_", ",", "indices_", ",", "coords_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", 
        "\"\<** ParallelDefChart: Parallelization definition\>\"", "]"}]}], 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"DefChart", "[", 
      RowBox[{"basis", ",", "args", ",", "indices", ",", "coords", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "DefChart", "]"}]}], "]"}]}], "]"}], ";"}], 
    "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
        RowBox[{"ParallelEvaluate", "[", 
         RowBox[{
          RowBox[{"$DefInfoQ", "=", "False"}], ",", 
          RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"DefChart", "[", 
         RowBox[{"basis", ",", "args", ",", "indices", ",", "coords", ",", 
          RowBox[{"FilterRules", "[", 
           RowBox[{
            RowBox[{"{", "options", "}"}], ",", 
            RowBox[{"Options", "[", "DefChart", "]"}]}], "]"}]}], "]"}], ",", 
        
        RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
        RowBox[{"ParallelEvaluate", "[", 
         RowBox[{
          RowBox[{"$DefInfoQ", "=", "True"}], ",", 
          RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], "*)"}], 
    ")"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelMetricInBasis", "[", 
    RowBox[{"metric_", ",", "basis_", ",", "matrix_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", 
        "\"\<** ParallelDefMetricInBasis: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"MetricInBasis", "[", 
      RowBox[{"metric", ",", "basis", ",", "matrix", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "MetricInBasis", "]"}]}], "]"}]}], "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"MetricInBasis", "[", 
        RowBox[{"metric", ",", "basis", ",", "matrix", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "MetricInBasis", "]"}]}], "]"}]}], "]"}], 
       ",", 
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "True"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelMetricCompute", "[", 
    RowBox[{"g_", ",", "ch_", ",", "T_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
       RowBox[{
       "Print", "[", 
        "\"\<** ParallelMetricCompute: Parallelization definition\>\"", 
        "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"MetricCompute", "[", 
      RowBox[{"g", ",", "ch", ",", "T", ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "options", "}"}], ",", 
         RowBox[{"Options", "[", "MetricCompute", "]"}]}], "]"}]}], "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "False"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ParallelEvaluate", "[", 
      RowBox[{
       RowBox[{"MetricCompute", "[", 
        RowBox[{"g", ",", "ch", ",", "T", ",", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "options", "}"}], ",", 
           RowBox[{"Options", "[", "MetricCompute", "]"}]}], "]"}]}], "]"}], 
       ",", 
       RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
       RowBox[{"ParallelEvaluate", "[", 
        RowBox[{
         RowBox[{"$DefInfoQ", "=", "True"}], ",", 
         RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParallelComponentValue", "[", 
   RowBox[{"expr_", ",", "value_", ",", 
    RowBox[{"options", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "\[Equal]", "True"}], ",", 
      RowBox[{
      "Print", "[", 
       "\"\<** ParallelComponentValue: Parallelization definition\>\"", 
       "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"ComponentValue", "[", 
     RowBox[{"expr", ",", "value"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "False"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"ParallelEvaluate", "[", 
     RowBox[{
      RowBox[{"ComponentValue", "[", 
       RowBox[{"expr", ",", "value"}], "]"}], ",", 
      RowBox[{"Kernels", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"$ParallelDefInfoQ", " ", "==", "False"}], ",", 
      RowBox[{"ParallelEvaluate", "[", 
       RowBox[{
        RowBox[{"$DefInfoQ", "=", "True"}], ",", 
        RowBox[{"Kernels", "[", "]"}]}], "]"}]}], "]"}], ";"}], 
   ")"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809240068659322*^9, 3.809240069983954*^9}, {
  3.809240156334722*^9, 3.809240206476138*^9}, {3.809240261290628*^9, 
  3.809240324056252*^9}, {3.809240409458609*^9, 3.809240490216663*^9}, {
  3.809240529234747*^9, 3.8092405981010923`*^9}, {3.809243755544643*^9, 
  3.8092437751232357`*^9}, {3.8092489721946087`*^9, 3.8092489766950808`*^9}, {
  3.8092520479077053`*^9, 3.809252111279907*^9}, {3.809252391703323*^9, 
  3.809252421956959*^9}, {3.80925251900867*^9, 3.809252519968562*^9}, {
  3.809255492356228*^9, 
  3.809255515767655*^9}},ExpressionUUID->"d34c50cc-3e6a-4c6b-bd21-\
9b547fa13ce7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["3. Parallel functions",
 FontColor->RGBColor[0, 0, 1]]], "Chapter",
 CellChangeTimes->{{3.809195646006777*^9, 
  3.8091956509258013`*^9}},ExpressionUUID->"b383f64c-96ef-4b8c-aeb7-\
54f5e10e90b0"],

Cell[CellGroupData[{

Cell["3.1 xTensor", "Subsection",
 CellChangeTimes->{{3.809195239972763*^9, 3.809195247426896*^9}, {
  3.8091954756140337`*^9, 3.809195476196504*^9}, {3.809196006256359*^9, 
  3.809196006465126*^9}},ExpressionUUID->"75d78a81-775c-4130-914f-\
6443dbd2f93f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelContractMetric", "[", "equation_", "]"}], " ", ":=", " ", 
   
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ContractMetric", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelSortCovDs", "[", "equation_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"SortCovDs", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelSimplification", "[", "equation_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Plus", "@@", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Simplification", "[", 
          RowBox[{"Plus", "@@", "#"}], "]"}], "&"}], ",", 
        RowBox[{"Partition", "[", 
         RowBox[{
          RowBox[{"Quiet", "[", 
           RowBox[{"AppendTo", "[", 
            RowBox[{
             RowBox[{"List", "@@", 
              RowBox[{"(", 
               RowBox[{"equation", "//", "Expand"}], ")"}]}], ",", "0"}], 
            "]"}], "]"}], ",", 
          RowBox[{"Length", "[", 
           RowBox[{"Kernels", "[", "]"}], "]"}]}], "]"}]}], "]"}]}]}], 
    "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParallelToCanonical", "[", "equation_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", 
    RowBox[{"Plus", "@@", 
     RowBox[{"ParallelMap", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ToCanonical", "[", 
         RowBox[{"Plus", "@@", "#"}], "]"}], "&"}], ",", 
       RowBox[{"Partition", "[", 
        RowBox[{
         RowBox[{"Quiet", "[", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
            RowBox[{"List", "@@", 
             RowBox[{"(", 
              RowBox[{"equation", "//", "Expand"}], ")"}]}], ",", "0"}], 
           "]"}], "]"}], ",", 
         RowBox[{"Length", "[", 
          RowBox[{"Kernels", "[", "]"}], "]"}]}], "]"}]}], "]"}]}]}], 
   "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809195959587809*^9, 3.809195964209567*^9}, {
  3.809245986337077*^9, 
  3.80924599190189*^9}},ExpressionUUID->"0863948f-0e02-4ba1-ae3e-\
9234e306bcec"]
}, Open  ]],

Cell[CellGroupData[{

Cell["3.2 xPert", "Subsection",
 CellChangeTimes->{{3.809195253386108*^9, 3.8091952597734623`*^9}, {
  3.809195478650428*^9, 3.809195479310246*^9}, {3.809196008498929*^9, 
  3.809196008664711*^9}},ExpressionUUID->"efccd98d-b654-42db-8a01-\
b08abc146087"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ParallelPerturbation", "[", "equation_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Perturbation", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelExpandPerturbation", "[", "equation_", "]"}], " ", ":=", 
   " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ExpandPerturbation", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelVarD", "[", 
    RowBox[{"T_", ",", "covd_"}], "]"}], "[", "equation_", "]"}], " ", ":=", 
  " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", 
    RowBox[{"Return", "[", 
     RowBox[{"Plus", "@@", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"VarD", "[", 
           RowBox[{"T", ",", "covd"}], "]"}], "[", "#", "]"}], "&"}], ",", 
        RowBox[{"Flatten", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
           RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
     "]"}]}], "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.80919593968181*^9, 3.809195943069269*^9}, {
  3.809244544030192*^9, 3.8092445578429527`*^9}, {3.809245633665762*^9, 
  3.809245637822298*^9}, {3.809245669357685*^9, 3.8092456726311207`*^9}, {
  3.80924576070463*^9, 3.809245762348312*^9}, {3.809245834254744*^9, 
  3.809245848141431*^9}, {3.8092459438801327`*^9, 
  3.809245976157558*^9}},ExpressionUUID->"404e18df-249e-4040-ab5c-\
7ec5cc9f68d6"]
}, Open  ]],

Cell[CellGroupData[{

Cell["3.3 xCoba", "Subsection",
 CellChangeTimes->{{3.8092399099714413`*^9, 
  3.809239918856422*^9}},ExpressionUUID->"a5d3404d-b13d-4ff4-bb92-\
30c103829be7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParallelToBasis", "[", "ch_", "]"}], "[", "equation_", "]"}], 
   " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"ToBasis", "[", "ch", "]"}], "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelComponentArray", "[", "equation_", "]"}], " ", ":=", " ", 
   
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ComponentArray", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParallelTraceBasisDummy", "[", "equation_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", 
     RowBox[{"Return", "[", 
      RowBox[{"Plus", "@@", 
       RowBox[{"ParallelMap", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"TraceBasisDummy", "[", "#", "]"}], "&"}], ",", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
            RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParallelToValues", "[", "equation_", "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", 
    RowBox[{"Return", "[", 
     RowBox[{"Plus", "@@", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"ToValues", "[", "#", "]"}], "&"}], ",", 
        RowBox[{"Flatten", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
           RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
     "]"}]}], "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.8092493064633713`*^9, 3.809249350800541*^9}, {
  3.809249472553916*^9, 3.809249511423916*^9}, {3.809249647432034*^9, 
  3.809249681157843*^9}},ExpressionUUID->"77a27376-c5e5-4a92-951f-\
9a4972f1550a"],

Cell["\<\
Custom function: //ToBasis[ch]//ToValues//TraceBasisDummy//ToValues in \
parallel\
\>", "Text",
 CellChangeTimes->{{3.809261490706278*^9, 
  3.809261527689453*^9}},ExpressionUUID->"2aa61572-3d08-45f4-b0f2-\
6173f5843c66"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ParallelInCoordinates", "[", "ch_", "]"}], "[", "equation_", 
   "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", 
    RowBox[{"Return", "[", 
     RowBox[{"Plus", "@@", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"ToValues", "[", 
          RowBox[{"TraceBasisDummy", "[", 
           RowBox[{"ToValues", "[", 
            RowBox[{
             RowBox[{"ToBasis", "[", "ch", "]"}], "[", "#", "]"}], "]"}], 
           "]"}], "]"}], "&"}], ",", 
        RowBox[{"Flatten", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"equation", "//", "Expand"}], ")"}], "/.", 
           RowBox[{"Plus", "\[Rule]", "List"}]}], "}"}], "]"}]}], "]"}]}], 
     "]"}]}], "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.809261395787184*^9, 3.809261470507559*^9}, {
  3.809261507554783*^9, 3.809261508035884*^9}, {3.809262038146611*^9, 
  3.8092620427440643`*^9}},ExpressionUUID->"0635b2ce-5645-4e89-b0bc-\
d6ce4814aa59"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["5. End",
 FontColor->RGBColor[0, 0, 1]]], "Chapter",
 CellChangeTimes->{{3.809195646006777*^9, 3.8091956509258013`*^9}, {
  3.809235432777226*^9, 
  3.809235436082596*^9}},ExpressionUUID->"a96edd50-c7f5-4d39-95cf-\
5a1461a200af"],

Cell[CellGroupData[{

Cell["5.1 End Package", "Subsection",
 CellChangeTimes->{{3.809235441755228*^9, 
  3.8092354486647577`*^9}},ExpressionUUID->"152f1893-4925-4523-9401-\
0abb85eec15c"],

Cell[CellGroupData[{

Cell[BoxData["$Context"], "Input",
 CellLabel->
  "In[107]:=",ExpressionUUID->"bb8ed8f8-6563-4139-a844-1315e6d2b076"],

Cell[BoxData["\<\"xAct`xParallel`Private`\"\>"], "Output",
 CellChangeTimes->{{3.809235494568747*^9, 3.809235511983724*^9}, 
   3.809236427498931*^9, 3.809236498116857*^9, 3.809236534410017*^9},
 CellLabel->
  "Out[107]=",ExpressionUUID->"2329360c-c3e1-496c-96b4-8ab3d927d3bf"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"End", "[", "]"}]], "Input",
 InitializationCell->True,
 CellLabel->
  "In[108]:=",ExpressionUUID->"8322be17-56dd-4d84-aacc-8bf189579f7d"],

Cell[BoxData["\<\"xAct`xParallel`Private`\"\>"], "Output",
 CellChangeTimes->{{3.8092354996713133`*^9, 3.8092355120165854`*^9}, {
  3.809236426916017*^9, 3.809236427505743*^9}, {3.80923649759235*^9, 
  3.809236498122484*^9}, {3.809236533892016*^9, 3.809236534438361*^9}},
 CellLabel->
  "Out[108]=",ExpressionUUID->"a442aa03-e7b9-4d5f-ab8a-e6491d3bcafa"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["$Context"], "Input",
 CellLabel->
  "In[109]:=",ExpressionUUID->"11d30c68-e86a-4885-a639-245858a3629d"],

Cell[BoxData["\<\"xAct`xParallel`\"\>"], "Output",
 CellChangeTimes->{{3.8092354983011513`*^9, 3.809235512022786*^9}, 
   3.809236427540586*^9, 3.809236498153287*^9, 3.809236534444317*^9},
 CellLabel->
  "Out[109]=",ExpressionUUID->"b263bb47-389c-4bee-a27e-07c495619f52"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"EndPackage", "[", "]"}]], "Input",
 InitializationCell->True,
 CellLabel->
  "In[110]:=",ExpressionUUID->"783c61e1-8de6-4920-8f2c-4ab05bdd9b71"],

Cell[CellGroupData[{

Cell[BoxData["$Context"], "Input",
 CellLabel->
  "In[111]:=",ExpressionUUID->"538a4602-0dea-454d-90ea-04ffdebc6427"],

Cell[BoxData["\<\"Global`\"\>"], "Output",
 CellChangeTimes->{{3.80923550675319*^9, 3.8092355120585213`*^9}, 
   3.809236427581994*^9, 3.809236498162396*^9, 3.809236534481982*^9},
 CellLabel->
  "Out[111]=",ExpressionUUID->"d8d55d70-0e81-43d1-baa4-327eadfe58fe"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1726, 1075},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"12.1 for Mac OS X x86 (64-bit) (June 19, 2020)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"b8165e5d-9574-4611-bb8d-0917f9adb832"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 152, 3, 98, "Title",ExpressionUUID->"ba32362b-b875-4cdd-86d5-7f433d9ef3c0"],
Cell[CellGroupData[{
Cell[757, 29, 242, 5, 59, "Subsection",ExpressionUUID->"96d4ac52-d19b-4329-905e-6690f99bb11d"],
Cell[1002, 36, 260, 5, 41, "Affiliation",ExpressionUUID->"e14de1ed-41c3-4b6c-acca-1ded21f7952d"],
Cell[1265, 43, 223, 5, 36, "Text",ExpressionUUID->"b4c575c2-de32-45aa-afc7-3542ff8c97be"],
Cell[1491, 50, 443, 9, 81, "Text",ExpressionUUID->"759596b6-a058-4737-8bec-5695296854a3"],
Cell[CellGroupData[{
Cell[1959, 63, 135, 2, 30, "Input",ExpressionUUID->"b8bc0769-312e-4057-9690-8a083b3e7f8a"],
Cell[2097, 67, 366, 7, 34, "Output",ExpressionUUID->"81766754-148e-4de2-8c22-e3f1f0921be3"]
}, Open  ]],
Cell[2478, 77, 391, 10, 46, "Input",ExpressionUUID->"efa92e14-ecd4-4e52-a256-a95ba2bfb632",
 InitializationCell->True],
Cell[2872, 89, 506, 12, 46, "Input",ExpressionUUID->"33b63522-7ff3-4c00-9db6-0cb3409274e7",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[3415, 106, 310, 5, 69, "Chapter",ExpressionUUID->"f3377482-b610-45cf-b21c-dba570d64186"],
Cell[CellGroupData[{
Cell[3750, 115, 155, 3, 54, "Subsection",ExpressionUUID->"f5cc90f8-d048-4b12-902c-4373f44bb813"],
Cell[3908, 120, 3210, 64, 425, "Input",ExpressionUUID->"b90b959c-ab48-441b-8efd-0609a92e2a31",
 InitializationCell->True]
}, Closed]],
Cell[CellGroupData[{
Cell[7155, 189, 164, 3, 38, "Subsection",ExpressionUUID->"4cca6b53-7298-425d-a9a8-6ff9533c4ff1"],
Cell[7322, 194, 2805, 68, 642, "Code",ExpressionUUID->"822d16b9-9547-4d93-a5fb-3bf0a6f9ff74"]
}, Closed]],
Cell[CellGroupData[{
Cell[10164, 267, 165, 3, 38, "Subsection",ExpressionUUID->"664a9634-7e01-471d-b358-e91f7f241b8c"],
Cell[10332, 272, 119, 0, 35, "Text",ExpressionUUID->"2f37771e-bc3a-44e3-b06b-5eb8c96b1cab"],
Cell[10454, 274, 1044, 24, 152, "Input",ExpressionUUID->"c48c233d-e5e3-4ce3-aca8-3becc61c3c28",
 InitializationCell->True],
Cell[11501, 300, 115, 0, 35, "Text",ExpressionUUID->"aa0fdf17-8772-48de-9652-3e0352af21ec"],
Cell[11619, 302, 465, 12, 46, "Input",ExpressionUUID->"93c41596-c3fe-4fb9-82a9-f191f88f9047",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[12109, 318, 136, 1, 30, "Input",ExpressionUUID->"ba75c92d-ce5b-4d37-8b7c-d5aa9ad5f8b7"],
Cell[12248, 321, 244, 3, 34, "Output",ExpressionUUID->"910eee37-96d0-44ab-ba1a-0d89d2a1d196"]
}, Open  ]],
Cell[12507, 327, 180, 3, 35, "Text",ExpressionUUID->"bb7bffb4-a931-42cb-84f9-9931ef10e945"],
Cell[CellGroupData[{
Cell[12712, 334, 569, 12, 46, "Input",ExpressionUUID->"0dc9b765-4468-452b-bc5e-1a36253114cd",
 InitializationCell->True],
Cell[13284, 348, 321, 5, 34, "Output",ExpressionUUID->"ac6401c2-1f3a-425e-a996-a0e091f051fa"]
}, Open  ]],
Cell[13620, 356, 179, 5, 35, "Text",ExpressionUUID->"c03ac4fc-3d51-4635-bef9-bed1b434d7f1"],
Cell[13802, 363, 630, 17, 46, "Input",ExpressionUUID->"898fb5f4-2934-46f9-9054-52fdad287326",
 InitializationCell->True],
Cell[14435, 382, 87, 0, 35, "Text",ExpressionUUID->"d2ac0f7c-ff31-4a2d-abf3-9fbd09351605"],
Cell[CellGroupData[{
Cell[14547, 386, 721, 18, 89, "Input",ExpressionUUID->"2663b90e-b8a3-4933-8b7a-dcbfac6c65d1",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[15293, 408, 394, 8, 24, "Print",ExpressionUUID->"4c6fc5cc-2d6c-4095-ac25-a737451e5623"],
Cell[15690, 418, 674, 16, 24, "Print",ExpressionUUID->"e981e942-5dee-4005-a4a0-0c0826637daa"],
Cell[16367, 436, 410, 8, 24, "Print",ExpressionUUID->"c838568e-6a61-4f83-978a-5c3aa28c5f53"]
}, Open  ]]
}, Open  ]],
Cell[16804, 448, 241, 4, 35, "Text",ExpressionUUID->"1bccd8bd-d8f5-4f16-bed3-c0b27a15a25d"],
Cell[17048, 454, 1780, 29, 278, "Input",ExpressionUUID->"335b35ae-d812-45ab-aadd-d044378035b3",
 InitializationCell->True],
Cell[18831, 485, 129, 0, 35, "Text",ExpressionUUID->"6193d10c-26da-4679-b8dd-6925de01539a"],
Cell[CellGroupData[{
Cell[18985, 489, 942, 22, 173, "Input",ExpressionUUID->"9d1dffee-a7dc-4810-9692-42ce985f1560",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[19952, 515, 398, 8, 24, "Print",ExpressionUUID->"bf19b117-93e9-413e-97c0-cef48552b5bc"],
Cell[20353, 525, 553, 10, 24, "Print",ExpressionUUID->"b0df725d-075e-4ef3-a516-e3c0ebc28720"],
Cell[20909, 537, 398, 8, 24, "Print",ExpressionUUID->"319bf54b-b457-4b8f-b153-8ec31ef4891a"]
}, Open  ]]
}, Open  ]],
Cell[21334, 549, 168, 3, 35, "Text",ExpressionUUID->"cd8ab63f-e85b-4be4-ab97-52d407a34ba5"],
Cell[CellGroupData[{
Cell[21527, 556, 117, 1, 30, "Input",ExpressionUUID->"051b73d1-4c7b-470e-ae6b-c3e2d9fc9918"],
Cell[21647, 559, 502, 9, 34, "Output",ExpressionUUID->"7e22a73b-6fee-436d-929e-9e467264d53c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[22186, 573, 113, 1, 30, "Input",ExpressionUUID->"445ca15b-b120-42be-8de8-25476485e027"],
Cell[22302, 576, 240, 3, 34, "Output",ExpressionUUID->"11c7ccd9-d5b0-4a90-96d8-304f5c2a3e48"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[22591, 585, 311, 5, 54, "Subsection",ExpressionUUID->"6fdfe586-3de9-4393-9050-548561e8c838"],
Cell[22905, 592, 180, 3, 35, "Text",ExpressionUUID->"610bf60d-595d-4acb-82f5-2fe0e9ed1d6b"],
Cell[23088, 597, 161, 3, 35, "Text",ExpressionUUID->"ac450c15-d0e7-4c05-9478-66ad435f05e1"],
Cell[23252, 602, 1134, 24, 173, "Input",ExpressionUUID->"bfbabe17-36a0-4153-b1cb-2fd21a65e540",
 InitializationCell->True],
Cell[24389, 628, 151, 3, 35, "Text",ExpressionUUID->"8d80d2f5-1651-475d-93da-e2802601e6ac"],
Cell[24543, 633, 2673, 58, 467, "Input",ExpressionUUID->"d2a7f374-5c5f-4803-8573-ef10165a41dc",
 InitializationCell->True],
Cell[27219, 693, 147, 3, 35, "Text",ExpressionUUID->"54d2f971-24dd-4de3-a92e-9331642256a1"],
Cell[27369, 698, 1567, 37, 257, "Input",ExpressionUUID->"df56db52-b183-4987-b258-279086dd050a",
 InitializationCell->True],
Cell[28939, 737, 147, 3, 35, "Text",ExpressionUUID->"f9ce9010-4037-4f64-b67d-da52fffa9e42"],
Cell[29089, 742, 2774, 64, 446, "Input",ExpressionUUID->"9beab0bd-0a41-4540-a4fd-a8d600103d05",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[31900, 811, 164, 3, 54, "Subsection",ExpressionUUID->"e54186b3-6434-43a1-b401-270382115695"],
Cell[CellGroupData[{
Cell[32089, 818, 180, 3, 46, "Input",ExpressionUUID->"b70d23db-6299-425a-bc5b-5149261cc0cf",
 InitializationCell->True],
Cell[32272, 823, 354, 5, 70, "Output",ExpressionUUID->"52b420ca-3b97-4fc7-ad43-cc889136eba7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[32663, 833, 179, 2, 30, "Input",ExpressionUUID->"86a24797-c2ba-4f23-968b-11804490cdea"],
Cell[32845, 837, 305, 4, 70, "Output",ExpressionUUID->"bdd4750d-d969-4657-ba1f-4a7a825c3591"]
}, Open  ]],
Cell[CellGroupData[{
Cell[33187, 846, 117, 1, 30, "Input",ExpressionUUID->"e83e9498-5333-41da-a1eb-5f6a1f63b611"],
Cell[33307, 849, 552, 10, 70, "Output",ExpressionUUID->"54be6dde-ca03-432b-948c-caabee22ca58"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[33908, 865, 365, 6, 38, "Subsection",ExpressionUUID->"22956cc7-67bf-4dda-9966-c022939e5ce2"],
Cell[34276, 873, 170, 3, 35, "Text",ExpressionUUID->"730fbf6a-287b-4c1d-836c-6171ffdb4f3f"],
Cell[34449, 878, 3511, 50, 46, "Input",ExpressionUUID->"d3f53303-dc28-4397-9fc2-c25fcba39ad4",
 InitializationCell->True],
Cell[37963, 930, 175, 3, 35, "Text",ExpressionUUID->"efa92f5c-acf5-4e2d-aeb2-7ef6ef0bcd62"],
Cell[38141, 935, 1295, 30, 131, "Input",ExpressionUUID->"e29313b6-d397-481f-96a4-476853731006",
 InitializationCell->True],
Cell[39439, 967, 177, 3, 35, "Text",ExpressionUUID->"dcda6719-7819-49c7-8e29-17b7c168b03d"],
Cell[39619, 972, 420, 11, 68, "Input",ExpressionUUID->"7703ef46-ca49-4bb2-b8c1-45baf59616d0",
 InitializationCell->True]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[40088, 989, 320, 5, 69, "Chapter",ExpressionUUID->"86f6e8eb-b89b-48c0-813c-4f40437dacd3"],
Cell[CellGroupData[{
Cell[40433, 998, 258, 4, 54, "Subsection",ExpressionUUID->"479ad674-a1dc-4958-adfa-57debef4bd82"],
Cell[40694, 1004, 9831, 253, 761, "Input",ExpressionUUID->"ccad0dc1-fa34-48b3-8574-0034c00d6d70",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[50562, 1262, 256, 4, 54, "Subsection",ExpressionUUID->"c79faea5-415e-4624-90ac-ef3ecbe474ed"],
Cell[50821, 1268, 4005, 98, 299, "Input",ExpressionUUID->"d7c49bf4-bc17-48ab-9d38-04798de6acf6",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[54863, 1371, 159, 3, 54, "Subsection",ExpressionUUID->"bd6c638b-2757-4fee-894e-996f0952ae8e"],
Cell[55025, 1376, 7870, 194, 593, "Input",ExpressionUUID->"d34c50cc-3e6a-4c6b-bd21-9b547fa13ce7",
 InitializationCell->True]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[62944, 1576, 219, 4, 69, "Chapter",ExpressionUUID->"b383f64c-96ef-4b8c-aeb7-54f5e10e90b0"],
Cell[CellGroupData[{
Cell[63188, 1584, 256, 4, 54, "Subsection",ExpressionUUID->"75d78a81-775c-4130-914f-6443dbd2f93f"],
Cell[63447, 1590, 3182, 91, 173, "Input",ExpressionUUID->"0863948f-0e02-4ba1-ae3e-9234e306bcec",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[66666, 1686, 254, 4, 54, "Subsection",ExpressionUUID->"efccd98d-b654-42db-8a01-b08abc146087"],
Cell[66923, 1692, 2569, 70, 131, "Input",ExpressionUUID->"404e18df-249e-4040-ab5c-7ec5cc9f68d6",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[69529, 1767, 159, 3, 54, "Subsection",ExpressionUUID->"a5d3404d-b13d-4ff4-bb92-30c103829be7"],
Cell[69691, 1772, 2992, 84, 173, "Input",ExpressionUUID->"77a27376-c5e5-4a92-951f-9a4972f1550a",
 InitializationCell->True],
Cell[72686, 1858, 231, 6, 35, "Text",ExpressionUUID->"2aa61572-3d08-45f4-b0f2-6173f5843c66"],
Cell[72920, 1866, 1089, 30, 46, "Input",ExpressionUUID->"0635b2ce-5645-4e89-b0bc-d6ce4814aa59",
 InitializationCell->True]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[74058, 1902, 253, 5, 69, "Chapter",ExpressionUUID->"a96edd50-c7f5-4d39-95cf-5a1461a200af"],
Cell[CellGroupData[{
Cell[74336, 1911, 165, 3, 54, "Subsection",ExpressionUUID->"152f1893-4925-4523-9401-0abb85eec15c"],
Cell[CellGroupData[{
Cell[74526, 1918, 117, 2, 30, "Input",ExpressionUUID->"bb8ed8f8-6563-4139-a844-1315e6d2b076"],
Cell[74646, 1922, 277, 4, 34, "Output",ExpressionUUID->"2329360c-c3e1-496c-96b4-8ab3d927d3bf"]
}, Open  ]],
Cell[CellGroupData[{
Cell[74960, 1931, 161, 4, 46, "Input",ExpressionUUID->"8322be17-56dd-4d84-aacc-8bf189579f7d",
 InitializationCell->True],
Cell[75124, 1937, 354, 5, 34, "Output",ExpressionUUID->"a442aa03-e7b9-4d5f-ab8a-e6491d3bcafa"]
}, Open  ]],
Cell[CellGroupData[{
Cell[75515, 1947, 117, 2, 30, "Input",ExpressionUUID->"11d30c68-e86a-4885-a639-245858a3629d"],
Cell[75635, 1951, 271, 4, 34, "Output",ExpressionUUID->"b263bb47-389c-4bee-a27e-07c495619f52"]
}, Open  ]],
Cell[75921, 1958, 168, 4, 46, "Input",ExpressionUUID->"783c61e1-8de6-4920-8f2c-4ab05bdd9b71",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[76114, 1966, 117, 2, 30, "Input",ExpressionUUID->"538a4602-0dea-454d-90ea-04ffdebc6427"],
Cell[76234, 1970, 262, 4, 34, "Output",ExpressionUUID->"d8d55d70-0e81-43d1-baa4-327eadfe58fe"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

